# Numa 技术架构文档

## 技术选型

### 后端技术栈

#### 1. 编程语言和框架
- **Python + FastAPI**：Python 语言生态丰富，FastAPI 框架性能优越，支持异步编程，非常适合构建高性能的 RESTful API。
  - **优势**：
    - 丰富的第三方库，便于快速开发。
    - 强大的异步支持，适合处理高并发请求。
    - 自动生成 API 文档，便于前端对接。
  - **适用场景**：适合快速原型开发和中小型项目。

#### 2. 数据库
- **SQLite**：轻量级数据库，适合原型开发和小型项目。
  - **优势**：
    - 无需单独部署数据库服务，简化开发环境。
    - 支持标准 SQL，易于上手。
  - **适用场景**：适合原型开发和小型项目。

#### 3. 任务队列
- **Celery**：用于处理异步任务，如代码生成、测试执行等。
  - **优势**：
    - 支持多种消息代理，如 Redis、RabbitMQ。
    - 易于扩展和管理任务。
  - **适用场景**：适合处理耗时任务，提高系统响应速度。

### 前端技术栈 (CLI)

#### 1. 编程语言和框架
- **Python + Click**：Python 语言生态丰富，Click 框架简单易用，适合构建命令行工具。
  - **优势**：
    - 丰富的第三方库，便于快速开发。
    - 简单易用的命令行接口。
  - **适用场景**：适合快速原型开发和中小型项目。

#### 2. HTTP 客户端
- **httpx**：现代的 HTTP 客户端，支持异步请求，适合与后端 API 交互。
  - **优势**：
    - 支持异步请求，提高响应速度。
    - 简单易用的 API，便于开发。
  - **适用场景**：适合与后端 API 交互。

### 部署和运维

#### 1. 容器化
- **Docker**：用于容器化应用，便于部署和管理。
  - **优势**：
    - 标准化的部署方式，便于跨平台部署。
    - 轻量级虚拟化，资源消耗低。
  - **适用场景**：适合部署和管理应用。

#### 2. 编排工具
- **Docker Compose**：用于编排多个容器，简化部署流程。
  - **优势**：
    - 简单易用的编排工具。
    - 支持多容器应用的部署。
  - **适用场景**：适合部署和管理多容器应用。

## 为什么选择 Python？

1. **生态丰富**：Python 有大量的第三方库，可以快速实现各种功能。
2. **开发效率高**：语法简洁，开发效率高，适合快速原型开发。
3. **社区支持**：Python 社区活跃，有大量的文档和教程，便于学习和开发。
4. **易于扩展**：Python 支持多种编程范式，易于扩展和维护。

## 为什么不选择其他语言？

1. **Java**：虽然性能优越，但开发效率相对较低，不适合快速原型开发。
2. **Go**：虽然性能优越，但生态相对较小，第三方库不如 Python 丰富。
3. **Node.js**：虽然适合构建 RESTful API，但异步编程模型对初学者有一定难度。

## 总结

我们选择 Python + FastAPI 作为后端技术栈，Python + Click 作为 CLI 技术栈，SQLite 作为数据库，Celery 作为任务队列，Docker 作为容器化工具。这样既适合快速原型开发，又具备良好的扩展性和维护性。